//===- Diagnostics.def - Diagnostics Text -----------------------*- C++ -*-===//
//
// This source file is part of the Swift.org open source project
//
// Copyright (c) 2014 - 2015 Apple Inc. and the Swift project authors
// Licensed under Apache License v2.0 with Runtime Library Exception
//
// See http://swift.org/LICENSE.txt for license information
// See http://swift.org/CONTRIBUTORS.txt for the list of Swift project authors
//
//===----------------------------------------------------------------------===//
//
//  This file defines all of the diagnostics that can be emitted by
//  Swift. Each diagnostic is described using one of three
//  kinds--error, warning, or note--along with a unique identifier, category, 
//  options, and text, and is followed by a signature describing the diagnostic
//  argument kinds, e.g., string, identifier, string
//
//===----------------------------------------------------------------------===//

#if !(defined(DIAG) || (defined(ERROR) && defined(WARNING) && defined(NOTE)))
#  error Must define either DIAG or the set {ERROR,WARNING,NOTE}
#endif

#ifndef ERROR
#  define ERROR(ID,Category,Options,Text,Signature)   \
  DIAG(ERROR,ID,Category,Options,Text,Signature)
#endif

#ifndef WARNING
#  define WARNING(ID,Category,Options,Text,Signature) \
  DIAG(WARNING,ID,Category,Options,Text,Signature)
#endif

#ifndef NOTE
#  define NOTE(ID,Category,Options,Text,Signature) \
  DIAG(NOTE,ID,Category,Options,Text,Signature)
#endif

//==============================================================================
// Lexing and Parsing diagnostics
//==============================================================================

ERROR(invalid_diagnostic,parsing,none,
      "INTERNAL ERROR: this diagnostic should not be produced", ())

ERROR(expected_lbrace,parsing,none,
     "to match this opening '{'", ())

NOTE(opening_brace,parsing,none,
     "to match this opening '{'", ())
NOTE(opening_bracket,parsing,none,
     "to match this opening '['", ())
NOTE(opening_paren,parsing,none,
     "to match this opening '('", ())
NOTE(opening_angle,parsing,none,
     "to match this opening '<'", ())
NOTE(previous_decldef,parsing,none,
     "previous %select{declaration|definition}0 of %1 is here", 
     (bool, Identifier))
NOTE(previous_declaration,parsing,none,
     "previous declaration of %0 is here", (Identifier))
NOTE(previous_definition,parsing,none,
     "previous definition of %0 is here", (Identifier))

ERROR(extra_rbrace,parsing,none,
      "extraneous '}' at top level", ())
      
//------------------------------------------------------------------------------
// Lexer diagnostics
//------------------------------------------------------------------------------

WARNING(lex_nul_character,lexing,none,
        "nul character embedded in middle of file", ())

ERROR(lex_invalid_utf8_character,lexing,none,
      "invalid utf8-encoded character found in source file", ())

ERROR(lex_unterminated_block_comment,lexing,none,
      "unterminated '/*' comment", ())
NOTE(lex_comment_start,lexing,none,
     "comment started here", ())

ERROR(lex_invalid_character_literal,lexing,none,
      "invalid character literal", ())

ERROR(lex_unterminated_string,lexing,none,
      "unterminated string literal", ())
ERROR(lex_unexpected_quote_string_interpolation,lexing,none,
      "unexpected '\"' character in string interpolation", ())
ERROR(lex_invalid_string_escape,lexing,none,
       "invalid escape sequence in string literal", ())
ERROR(lex_invalid_string_x_escape,lexing,none,
       "\\x escape sequence expects 2 hex digits to follow it", ())
ERROR(lex_invalid_string_u_escape,lexing,none,
       "\\u escape sequence expects 4 hex digits to follow it", ())
ERROR(lex_invalid_string_U_escape,lexing,none,
       "\\U escape sequence expects 8 hex digits to follow it", ())
ERROR(lex_invalid_unicode_code_point,lexing,none,
       "invalid unicode code point", ())
ERROR(lex_invalid_hex_escape,lexing,none,
       "invalid hex escape, use \\u00XX for values over \\x7F", ())


ERROR(lex_invalid_character,lexing,none,
       "invalid character in source file", ())
ERROR(lex_expected_sign_in_fp,lexing,none,
       "expected '+' or '-' in floating point literal exponent", ())
ERROR(lex_expected_digit_in_fp_exponent,lexing,none,
       "expected a digit after decimal point in floating point exponent", ())
ERROR(lex_expected_digit_in_int_literal,lexing,none,
       "expected a digit after integer literal prefix", ())

//------------------------------------------------------------------------------
// Declaration parsing diagnostics
//------------------------------------------------------------------------------

ERROR(bad_module_name,decl_parsing,none,
      "file name is not a valid identifier", ())

ERROR(expected_decl,decl_parsing,none,
      "expected declaration", ())
ERROR(top_level_decl_without_type,decl_parsing,none,
      "top-level declarations require a type specifier", ())
ERROR(expected_identifier_in_decl,decl_parsing,none,
      "expected identifier in %0 declaration", (StringRef))
ERROR(expected_type_or_init,decl_parsing,none,
      "expected a type or an initializer", ())
ERROR(non_simple_var,decl_parsing,none,
      "complex 'var' declaration not allowed here", ())
ERROR(precedence_overload,decl_parsing,none,
      "infix precedence of functions in an overload set must match", ())
ERROR(decl_redefinition,decl_parsing,none,
      "%select{declaration|definition}0 conflicts with previous value", 
      (bool))
ERROR(disallowed_var_decl,decl_parsing,none,
      "'var' declarations not allowed here, use data members instead", ())
ERROR(disallowed_property_decl,decl_parsing,none,
      "'var' declarations with getter/setter not allowed here", ())
ERROR(disallowed_func_def,decl_parsing,none,
      "function body not allowed here", ())
ERROR(disallowed_type,decl_parsing,none,
      "type not allowed here", ())
ERROR(disallowed_init,decl_parsing,none,
      "variable initializer is not allowed here", ())
ERROR(disallowed_semi,decl_parsing,none,
      "semicolon is not allowed here", ())
ERROR(decl_inner_scope,decl_parsing,none,
      "declaration is only valid at file scope", ())

// Var Name
ERROR(expected_lparen_var_name,decl_parsing,none,
      "expected identifier or '(' in var name", ())
ERROR(expected_rparen_var_name,decl_parsing,none,
      "expected ')' at end of var name", ())
ERROR(invalid_index_in_var_name_path,decl_parsing,none,
      "%0 is an invalid index for %1", (Identifier, Type))
      
// Variable getters/setters
ERROR(getset_missing_type,decl_parsing,none,
      "variable with getter/setter must have an explicit type", ())
ERROR(getset_nontrivial_pattern,decl_parsing,none,
      "getter/setter can only be defined for a single variable", ())
ERROR(expected_rbrace_in_getset,decl_parsing,none,
      "expected '}' at end of variable get/set clause", ())
ERROR(duplicate_getset,decl_parsing,none,
      "duplicate definition of %select{getter|setter}0",
      (bool))
NOTE(previous_getset,decl_parsing,none,
     "previous definition of %select{getter|setter}0 is here", (bool))
ERROR(expected_lbrace_get,decl_parsing,none,
      "expected '{' to start getter definition", ())
ERROR(expected_getset,decl_parsing,none,
      "expected 'get' or 'set' to define variable access",())
ERROR(expected_setname,decl_parsing,none,
      "expected the name of the setter value",())
ERROR(empty_parens_getsetname,decl_parsing,none,
      "empty parameter list is unnecessary for %select{getter|setter}0",
      (bool))
ERROR(expected_rparen_setname,decl_parsing,none,
      "expected ')' after setter value name",())
ERROR(expected_lbrace_set,decl_parsing,none,
      "expected '{' to start setter definition", ())
ERROR(var_set_without_get,decl_parsing,none,
      "variable with a setter must also have a getter", ())
ERROR(getset_init,decl_parsing,none,
      "variable with getter/setter cannot have an initializer", ())

// Import
ERROR(decl_expected_module_name,decl_parsing,none,
      "expected module name in import declaration", ())

// Extension
ERROR(expected_rbrace_extension,type_parsing,none,
      "expected '}' at end of extension", ())

// TypeAlias
ERROR(expected_equal_in_typealias,decl_parsing,none,
      "expected '=' in typealias declaration", ())
ERROR(expected_type_in_typealias,decl_parsing,none,
      "expected type in var declaration", ())
ERROR(associated_type_def,decl_parsing,none,
      "typealias %0 in protocol cannot have a definition", (Identifier))

// Func
ERROR(func_decl_without_paren,decl_parsing,none,
      "expected '(' in argument list of func declaration", ())
ERROR(static_func_decl_global_scope,decl_parsing,none,
      "'static' functions may only be declared on a type", ())
ERROR(func_selector_without_paren,decl_parsing,none,
      "expected '(' after identifier in argument list of selector-style func declaration", ())
ERROR(func_selector_with_not_one_argument,decl_parsing,none,
      "selector-style func arguments may only be used with one-argument patterns", ())
ERROR(func_selector_with_curry,decl_parsing,none,
      "funcs with selector-style arguments may not be curried", ())

// OneOf

// Struct
ERROR(expected_lbrace_struct,decl_parsing,none,
      "expected '{' in struct", ())
ERROR(expected_rbrace_struct,decl_parsing,none,
      "expected '}' in struct", ())

// Class
ERROR(expected_lbrace_class,decl_parsing,none,
      "expected '{' in class", ())
ERROR(expected_rbrace_class,decl_parsing,none,
      "expected '}' in class", ())

// Protocol
ERROR(expected_rbrace_protocol,decl_parsing,none,
      "expected '}' in protocol", ())
ERROR(protocol_static_func,decl_parsing,none,
      "static methods are not permitted in a protocol", ())
ERROR(protocol_func_def,decl_parsing,none,
      "methods may not be defined in a protocol", ())

// Subscripting
ERROR(expected_lparen_subscript,decl_parsing,none,
      "expected '(' for subscript parameters", ())
ERROR(expected_arrow_subscript,decl_parsing,none,
      "expected '->' for subscript element type", ())
ERROR(expected_type_subscript,type_parsing,none,
      "expected subscripting element type", ())
ERROR(expected_lbrace_subscript,decl_parsing,none,
      "expected '{' for subscripting", ())
ERROR(set_without_get_subscript,decl_parsing,none,
      "subscripting with a setter must also have a getter", ())

// Constructor
ERROR(expected_lparen_constructor,decl_parsing,none,
      "expected '(' for constructor parameters", ())
ERROR(expected_lbrace_constructor,decl_parsing,none,
      "expected '{' for constructor", ())

// Destructor
ERROR(expected_lbrace_destructor,decl_parsing,none,
      "expected '{' for destructor", ())


//------------------------------------------------------------------------------
// Type parsing diagnostics
//------------------------------------------------------------------------------

ERROR(expected_type,type_parsing,none,
      "expected type", ())
ERROR(expected_initializer_expr,expr_parsing,none,
      "expected initializer expression after '='", ())
ERROR(attribute_does_not_apply_to_type,type_parsing,none,
      "attribute does not apply to type", ())

// Named types
ERROR(expected_identifier_in_dotted_type,expr_parsing,none,
      "expected identifier in dotted type", ())
ERROR(expected_identifier_for_type,expr_parsing,none,
      "expected identifier for type name", ())
ERROR(named_definition_isnt_type,expr_parsing,none,
      "%0 does not name a type", (Identifier))
ERROR(expected_rangle_generic_arg_list,type_parsing,none,
      "expected '>' to complete generic argument list", ())


// Function types
ERROR(expected_type_function_result,type_parsing,none,
      "expected type for function result", ())

ERROR(expected_function_argument_must_be_paren,type_parsing,none,
      "function argument type must be parenthesized", ())

// OneOf Types
ERROR(expected_lbrace_oneof_type,type_parsing,none,
      "expected '{' in oneof", ())
ERROR(expected_rbrace_oneof_type,type_parsing,none,
      "expected '}' at end of oneof", ())
ERROR(duplicate_oneof_element,type_parsing,none,
      "duplicate definition of element '%0'", (StringRef))
ERROR(expected_type_oneof_element,type_parsing,none,
      "expected type while parsing oneof element", ())

// Array Types      
ERROR(expected_expr_array_type,expr_parsing,none,
      "expected expression for size of array type", ())
ERROR(non_constant_array,type_parsing,none,
      "array has non-constant size", ())
ERROR(expected_rbracket_array_type,type_parsing,none,
      "expected ']' in array type", ())
ERROR(unsupported_fixed_length_array,type_parsing,none,
      "fixed-length arrays are not yet supported", ())
      
// Tuple Types
ERROR(expected_rparen_tuple_type_list,type_parsing,none,
      "expected ')' at end of tuple list", ())
ERROR(empty_tuple_ellipsis,type_parsing,none,
      "varargs used in tuple type with no fields", ())
ERROR(tuple_ellipsis_init,type_parsing,none,
      "varargs used with tuple field with initializer", ())

// Protocol Types
ERROR(expected_lbrace_protocol_type,type_parsing,none,
      "expected '{' in protocol type", ())
ERROR(expected_protocol_member,type_parsing,none,
      "expected a function or variable declaration in protocol", ())
ERROR(expected_langle_protocol,type_parsing,none,
      "expected '<' in protocol composition type", ())
ERROR(expected_rangle_protocol,type_parsing,none,
      "expected '>' to complete protocol composition type", ())

//------------------------------------------------------------------------------
// Pattern parsing diagnostics
//------------------------------------------------------------------------------

ERROR(expected_pattern,pattern_parsing,none,
      "expected pattern", ())
ERROR(expected_rparen_tuple_pattern_list,pattern_parsing,non,
      "expected ')' at end of tuple pattern", ())
ERROR(untyped_pattern_ellipsis,pattern_parsing,none,
      "'...' cannot be applied to a subpattern which is not explicitly typed", ())

//------------------------------------------------------------------------------
// Statement parsing diagnostics
//------------------------------------------------------------------------------
ERROR(expected_stmt,stmt_parsing,none,
      "expected statement", ())
ERROR(illegal_top_level_stmt,stmt_parsing,none,
      "statments are not allowed at the top level", ())
ERROR(illegal_top_level_expr,stmt_parsing,none,
      "expressions are not allowed at the top level", ())

// Assignment statement
ERROR(expected_expr_assignment,stmt_parsing,none,
      "expected expression in assignment", ())

// Brace Statement
ERROR(expected_rbrace_in_brace_stmt,stmt_parsing,none,
      "expected '}' at end of brace statement", ())

// Return Statement
ERROR(expected_expr_return,stmt_parsing,none,
      "expected expresssion in 'return' statement", ())

// If Statement
ERROR(expected_expr_if,stmt_parsing,none,
      "expected expresssion in 'if' condition", ())
ERROR(expected_lbrace_after_if,stmt_parsing,none,
      "expected '{' after 'if' condition", ())
ERROR(expected_lbrace_after_else,stmt_parsing,none,
      "expected '{' after 'else'", ())

// While Statement
ERROR(expected_expr_while,stmt_parsing,none,
      "expected expresssion in 'while' condition", ())
ERROR(expected_lbrace_after_while,stmt_parsing,none,
      "expected '{' after 'while' condition", ())

// Do/While Statement
ERROR(expected_lbrace_after_do,stmt_parsing,none,
      "expected '{' after 'do'", ())
ERROR(expected_while_in_dowhile,stmt_parsing,none,
      "expected 'while' in 'do-while' loop", ())
ERROR(expected_expr_do_while,stmt_parsing,none,
      "expected expresssion in 'do-while' condition", ())

// C-Style For Stmt
ERROR(expected_lparen_for_stmt,stmt_parsing,none,
      "expected '(' in 'for' statement", ())
ERROR(expected_semi_for_stmt,stmt_parsing,none,
      "expected ';' in 'for' statement", ())
ERROR(expected_cond_for_stmt,stmt_parsing,none,
      "expected condition in 'for' statement", ())
ERROR(expected_rparen_for_stmt,stmt_parsing,none,
      "expected ')' in 'for' statement", ())
ERROR(expected_lbrace_after_for,stmt_parsing,none,
      "expected '{' in 'for' statement", ())

// For-each Stmt
ERROR(expected_foreach_in,stmt_parsing,none,
      "expected 'in' after for-each pattern", ())
ERROR(expected_foreach_container,stmt_parsing,none,
      "expected container expression for for-each loop", ())
ERROR(expected_foreach_lbrace,stmt_parsing,none,
      "expected '{' to start the body of for-each loop", ())
      
//------------------------------------------------------------------------------
// Expression parsing diagnostics
//------------------------------------------------------------------------------

ERROR(expected_expr,expr_parsing,none,
      "expected expression", ())

ERROR(expected_expr_after_operator,expr_parsing,none,
      "expected expression after operator", ())
ERROR(expected_prefix_operator,expr_parsing,none,
      "unary operator cannot be separated from its operand", ())

ERROR(expected_field_name,expr_parsing,none,
      "expected field name following '.'", ())
ERROR(expected_dollar_numeric,expr_parsing,none,
      "expected numeric value following '$'", ())
ERROR(dollar_numeric_too_large,expr_parsing,none,
      "numeric value following '$' is too large", ())

ERROR(anon_closure_arg_not_in_closure,expr_parsing,none,
      "anonymous closure argument not contained in a closure", ())


ERROR(expected_identifier_after_dot_expr,expr_parsing,none,
      "expected identifier after '.' expression", ())
ERROR(expected_field_spec_name_tuple_expr,expr_parsing,none,
      "expected field specifier name in tuple expression", ())    

ERROR(expected_expr_closure,expr_parsing,none,
      "expected expression in closure", ())
ERROR(expected_rbrace_in_closure,expr_parsing,none,
      "expected '}' at end of closure", ())

// Subscript expressions
ERROR(expected_expr_subscript_value,expr_parsing,none,
      "expected expression for subscript value", ())
ERROR(expected_bracket_array_subscript,expr_parsing,none,
      "expected ']' in subscript expression", ())

// New expressions
ERROR(array_new_init_unsupported,expr_parsing,none,
      "no support init in new", ())
ERROR(array_new_missing_first_bound,expr_parsing,none,
      "must specify length of array to allocate", ())
ERROR(expected_expr_new_array_bound,expr_parsing,none,
      "expected expression for new array bound", ())
ERROR(expected_bracket_array_new,expr_parsing,none,
      "expected ']' in new expression", ())

// Tuples and parenthesized expressions
ERROR(expected_expr_parentheses,expr_parsing,none,
      "expected subexpression in parentheses", ())
ERROR(expected_equal_in_tuple_expr,expr_parsing,none,
      "expected '=' in tuple expression", ())
ERROR(expected_rparen_parenthesis_expr,expr_parsing,none,
      "expected ')' in parenthesis expression", ())

// Func expressions
ERROR(expected_lbrace_func_expr,decl_parsing,none,
      "expected '{' in func expression", ())


//------------------------------------------------------------------------------
// Literal parsing diagnostics
//------------------------------------------------------------------------------

NOTE(while_converting_literal,sema,none,
     "while converting literal to %0", (Type))
NOTE(while_processing_literal_conversion_function,sema,none,
     "while processing argument of conversion function to inferred type %0",
      (Type))

ERROR(type_not_compatible_literal,literal_parsing,none,
      "inferred type %0 is not compatible with literal", (Type))
ERROR(type_ambiguous_literal_conversion,literal_parsing,none,
      "%0 has multiple '%1' methods", (Type, StringRef))
ERROR(type_literal_conversion_not_static,literal_parsing,none,
      "'%1' method in %0 must be a static method",
      (Type, StringRef))
ERROR(literal_conversion_wrong_return_type,literal_parsing,none,
      "'%1' should return %0", (Type, StringRef))
ERROR(type_literal_conversion_defined_wrong,literal_parsing,none,
      "conversion method in %0 not defined in terms of standard library type",
       (Type))

WARNING(int_literal_too_large,literal_parsing,none,
        "integer constant too large (%0 bits) for %1",
        (unsigned, Type))
      
WARNING(float_literal_overflow,literal_parsing,none,
        "floating point constant overflowed to %0", (StringRef))
WARNING(float_literal_underflow,literal_parsing,none,
        "floating point constant underflowed to %0", (StringRef))

ERROR(string_interpolation_extra,literal_parsing,none,
      "extra tokens after interpolated string expression", ())
      
//------------------------------------------------------------------------------
// Attribute-parsing diagnostics
//------------------------------------------------------------------------------
ERROR(expected_attribute_name,attribute_parsing,none,
      "expected an attribute name", ())
ERROR(unknown_attribute,attribute_parsing,none,
      "unknown attribute '%0'", (StringRef))
ERROR(duplicate_attribute,attribute_parsing,none,
      "duplicate '%0' attribute", (StringRef))
ERROR(cannot_combine_attribute,attribute_parsing,none,
      "attribute '%0' cannot be combined with this attribute", (StringRef))
ERROR(expected_in_attribute_list,attribute_parsing,none,
      "expected ']' or ',' in attribute list", ())

// infix and unary      
ERROR(expected_precedence_value,attribute_parsing,none,
      "expected precedence number in infix attribute", ())
ERROR(invalid_precedence,attribute_parsing,none,
      "precedence '%0' is not an integer between 0 and 255", (StringRef))

ERROR(import_attributes,attribute_parsing,none,
      "invalid attributes specified for import", ())

// byref
ERROR(byref_attribute_expected_identifier,attribute_parsing,none,
      "expected identifier for byref attribute", ())
ERROR(byref_attribute_unknown_qualifier,attribute_parsing,none,
      "unknown qualifier for byref attribute", ())
ERROR(byref_attribute_expected_rparen,attribute_parsing,none,
      "expected ')' at end of byref qualifiers", ())

// auto_closure
ERROR(autoclosure_requires_function_type,attribute_parsing,none,
      "auto_closure attribute only applies to syntactic function types", ())
ERROR(autoclosure_function_input_nonunit,attribute_parsing,none,
      "auto_closure argument type %0 must be '()'", (Type))

// asmname
ERROR(asmname_expected_equals,attribute_parsing,none,
      "expected '=' in asmname attribute", ())
ERROR(asmname_expected_string_literal,attribute_parsing,none,
      "expected string literal in asmname attribute", ())
ERROR(asmname_interpolated_string,attribute_parsing,none,
      "asmname cannot be an interpolated string literal", ())
      
//------------------------------------------------------------------------------
// Generics parsing diagnostics
//------------------------------------------------------------------------------
ERROR(expected_rangle_generics_param,parsing,none,
      "expected '>' to complete generic parameter list", ())
ERROR(expected_generics_parameter_name,parsing,none,
      "expected an identifier to name generic parameter", ())
ERROR(expected_generics_type_restriction,parsing,none,
      "expected a type name or protocol composition restricting %0",
      (Identifier))
ERROR(requires_single_equal,parsing,none,
      "use '==' for same-type requirements rather than '='", ())
ERROR(expected_requirement_delim,parsing,none,
      "expected ':' or '==' to indicate a conformance or same-type requirement",
      ())

//==============================================================================
// Semantic Analysis Diagnostics
//==============================================================================

NOTE(type_declared_here,sema,none,
     "type declared here", ())
NOTE(decl_declared_here,sema,none,
     "%0 declared here", (Identifier))

NOTE(while_converting_var_init,sema,none,
     "while converting 'var' initializer to declared type %0", (Type))
NOTE(while_converting_default_tuple_value,sema,none,
     "while converting default tuple value to element type %0", (Type))
NOTE(while_converting_function_argument,sema,none,
     "while converting function argument to expected type %0", (Type))
NOTE(while_converting_subscript_index,sema,none,
     "while converting subscript index to expected type %0", (Type))

ERROR(invalid_anonymous_argument,sema,none,
      "use of invalid anonymous argument, %0 is larger than"
      " # arguments to bound function (%1)", (unsigned, unsigned))

ERROR(constraint_type_check_fail,sema,none,
      "expression does not type-check", ())
ERROR(constraint_assign_type_check_fail,sema,none,
      "assignment does not type-check", ())

//------------------------------------------------------------------------------
// Name Binding
//------------------------------------------------------------------------------

ERROR(sema_opening_import,sema_nb,none,
      "opening import file '%0.swift': %1", (StringRef, StringRef))
ERROR(invalid_declaration_imported,sema_nb,none,
      "invalid declaration referenced in import", ())

ERROR(unknown_name_in_type,sema_nb,none,
      "use of unknown scope %0 in type reference", (Identifier))
ERROR(unknown_dotted_type_base,sema_nb,none,
      "type references cannot access elements of %0", (Identifier))
ERROR(dotted_reference_not_type,sema_nb,none,
      "dotted reference to %0 does not resolve to a type", (Identifier))

ERROR(invalid_redecl,sema_nb,none,"invalid redeclaration",())
NOTE(invalid_redecl_prev,sema_nb,none,
     "%0 previously declared here", (Identifier))

ERROR(no_module_or_type,sema_nb,none,
      "no such module or type", ())
ERROR(abiguous_type_base,sema_nb,none,
      "%0 is ambiguous for type look up in this context", (Identifier))
ERROR(invalid_member_type,sema_nb,none,
      "%0 is not a member type of %1", (Identifier, Identifier))
ERROR(use_nonmatching_operator,sema_nb,none,
      "%0 is not a %select{binary|prefix unary|postfix unary}1 operator",
      (Identifier, unsigned))
ERROR(use_unresolved_identifier,sema_nb,none,
      "use of unresolved identifier %0", (Identifier))
ERROR(use_undeclared_type,sema_nb,none,
      "use of undeclared type %0", (Identifier))
ERROR(cannot_resolve_extension_dot,sema_nb,none,
      "cannot lookup members of types while resolving extension declarations", ())

//------------------------------------------------------------------------------
// Type Check Coercions
//------------------------------------------------------------------------------

ERROR(cannot_convert_unresolved_reference,sema_tcc,none,
      "unresolved reference to member %0 cannot convert to %1",
      (Identifier,Type))
ERROR(invalid_member_in_type,sema_tcc,none,
      "type %0 has no member named %1", (Type, Identifier))
ERROR(call_element_not_function_type,sema_tcc,none,
      "cannot provide an initializer for member %1 of type %0", (Type, Identifier))
ERROR(call_element_function_type,sema_tcc,none,
      "must provide an initializer for member %1 of type %0", (Type, Identifier))
ERROR(not_initialized_tuple_element,sema_tcc,none,
      "no value to initialize tuple element #%0 in expression of type %1",
      (unsigned, Type))
ERROR(not_initialized_named_tuple_element,sema_tcc,none,
     "no value to initialize tuple element %0 (#%1) in expression of type %2",
      (Identifier, unsigned, Type))
ERROR(tuple_element_not_used,sema_tcc,none,
      "element #%0 of tuple value not used when converting to type %1",
      (unsigned, Type))
ERROR(named_tuple_element_not_used,sema_tcc,none,
      "element %0 (#%1) of tuple value not used when converting to type %2",
      (Identifier, unsigned, Type))
ERROR(tuple_element_type_mismatch,sema_tcc,none,
      "element #%0 of tuple value has type %1, but expected type %2",
      (unsigned, Type, Type))
ERROR(invalid_conversion,sema_tcc,none,
      "invalid conversion from type %0 to %1", (Type, Type))
ERROR(invalid_conversion_of_lvalue,sema_tcc,none,
      "passing %0 variable by reference as %1 variable",
      (Type, Type))
ERROR(invalid_conversion_to_lvalue,sema_tcc,none,
      "passing %0 value by reference as %1 variable",
      (Type, Type))
ERROR(implicit_use_of_lvalue,sema_tcc,none,
      "passing %0 variable by reference without an '&' operator", (Type))
ERROR(load_of_explicit_lvalue,sema_tcc,none,
      "%0 variable is not being passed by reference", (Type))
ERROR(explicit_lvalue,sema_tcc,none,
      "'&' is only needed when passing values by reference", ())
ERROR(invalid_implicit_protocol_conformance,sema_tcc,none,
      "type %0 does not conform to protocol %1", (Type,Type))
ERROR(inconsistent_deduction,sema_tcc,none,
      "inconsistent deduction for type parameter %0 (%1 vs. %2)",
      (StringRef, Type, Type))
ERROR(funcexpr_not_function_type,sema_tcc,none,
      "cannot convert func expression to non-function type %0", (Type))
ERROR(funcexpr_incompatible_result,sema_tcc,none,
      "func has declared type %0 but inferred type %1", (Type, Type))

//------------------------------------------------------------------------------
// Type Check Declarations
//------------------------------------------------------------------------------

ERROR(invalid_index_in_element_ref,sema_tcd,none,
      "%0 is an invalid index for %1", (Identifier, Type))
ERROR(operator_not_func,sema_tcd,none,
      "operators must be declared with 'func'", ())
ERROR(custom_operator_addressof,sema_tcd,none,
      "cannot declare a custom unary '&' operator", ())
ERROR(var_type_not_materializable,sema_tcd,none,
      "type %0 of variable is not materializable", (Type))
ERROR(oneof_element_not_materializable,sema_tcd,none,
      "type of oneof element is not materializable", ())
ERROR(subscript_not_member,sema_tcd,none,
      "subscript declaration must be a member of a type", ())
ERROR(constructor_not_member,sema_tcd,none,
      "constructor declaration must be a member of a type", ())
ERROR(destructor_not_member,sema_tcd,none,
      "destructor declaration must be a member of a class type", ())

// Attributes
ERROR(invalid_arg_count_for_operator,sema_tcd,none,
      "operators must have one or two arguments", ())
ERROR(invalid_infix_left_input,sema_tcd,none,
  "function with 'infix_left' specified must take a two element tuple as input",
     ())
ERROR(infix_not_an_operator,sema_tcd,none,
      "only operator functions may be declared with an infix attribute", ())
ERROR(binops_infix_left,sema_tcd,none,
      "binary operators must be declared with an infix attribute", ())
ERROR(postfix_not_an_operator,sema_tcd,none,
      "only operator functions can be declared 'postfix'", ())
ERROR(invalid_postfix_input,sema_tcd,none,
      "only unary operators can be declared 'postfix'", ())
ERROR(assignment_without_byref,sema_tcd,none,
      "assignment operator must have an initial [byref] argument", ())
ERROR(assignment_nonvoid,sema_tcd,none,
      "assignment operator must return 'Void' (not %0)", (Type))
ERROR(conversion_not_instance_method,sema_tcd,none,
      "conversion function %0 is not an instance method",
      (Identifier))
ERROR(conversion_params,sema_tcd,none,
      "conversion function %0 has non-defaulted parameters", (Identifier))
ERROR(invalid_objc_decl,sema_tcd,none,
      "only classes and their methods can be declared 'objc'", ())
      
ERROR(invalid_decl_attribute,sema_tcd,none,
      "attribute '%0' cannot be applied to declaration", (StringRef))

// Extensions
ERROR(non_nominal_extension,sema_tcd,none,
      "%select{non-nominal type|protocol}0 %1 cannot be extended", (bool, Type))

// Protocols
ERROR(nonprotocol_inherit,sema_tcd,none,
      "cannot inherit non-protocol type %0", (Type))
ERROR(type_does_not_conform,sema_tcd,none,
      "type %0 does not conform to protocol %1", (Type, Type))
NOTE(inherited_protocol_does_not_conform,sema_tcd,none,
     "type %0 does not conform to inherited protocol %1", (Type, Type))
NOTE(no_witnesses,sema_tcd,none,
     "protocol requires %select{function %1|property %1|subscript operator}0 "
     "with type %2", (int, Identifier, Type))
NOTE(ambiguous_witnesses,sema_tcd,none,
     "multiple matching "
     "%select{functions named %1|properties named %1|subscript operators}0 "
     "with type %2", (int, Identifier, Type))
NOTE(no_witnesses_type,sema_tcd,none,
     "protocol requires nested type %0", (Identifier))
NOTE(protocol_witness,sema_tcd,none,
     "possibly intended match with type %0", (Type))
NOTE(ambiguous_witnesses_type,sema_tcd,none,
     "multiple matching types named %0", (Identifier))
NOTE(protocol_witness_type,sema_tcd,none,
     "possibly intended match", ())
NOTE(protocol_witness_nonconform_type,sema_tcd,none,
     "possibly intended match %0 does not conform to %1", (Type, Type))
ERROR(circular_protocol_def,sema_tcd,none,
      "circular protocol inheritance %0", (StringRef))
NOTE(protocol_here,sema_tcd,none,
     "protocol %0 declared here", (Identifier))
ERROR(protocol_composition_not_protocol,sema_tcd,none, 
      "non-protocol type %0 cannot be used within 'protocol<...>'", (Type))

ERROR(requires_conformance_nonprotocol,sema_tcd,none,
      "type %0 constrained to non-protocol type %1", (Type, Type))
ERROR(requires_not_suitable_archetype,sema_tcd,none,
      "%select{|first |second }0type %1 in %select{conformance|same-type}2 "
      "requirement does not refer to a generic parameter or associated type",
      (int, Type, int))
ERROR(requires_generic_param_equal,sema_tcd,none,
      "same-type requirement makes generic parameters %0 and %1 equivalent",
      (Identifier, Identifier))

ERROR(override_multiple_decls_base,sema_tcd,none,
      "declaration cannot override more than one base class declaration", ())
ERROR(override_multiple_decls_derived,sema_tcd,none,
      "declaration cannot be overridden by more than one derived class "
      "declaration", ())
ERROR(override_decl_extension,sema_tcd,none,
      "declarations from extensions cannot be overridden yet", ())
ERROR(overload_base_decl,sema_tcd,none,
      "cannot overload a declaration from a base class", ())

//------------------------------------------------------------------------------
// Type Check Expressions
//------------------------------------------------------------------------------

NOTE(found_candidate,sema_tce,none,
     "found this candidate", ())
NOTE(first_declaration,sema_tce,none,
     "first declaration", ())
NOTE(second_declaration,sema_tce,none,
     "second declaration", ())

ERROR(no_IntegerLiteralType_found,sema_tce,none,
      "standard library error: IntegerLiteralType not defined", ())
ERROR(no_FloatLiteralType_found,sema_tce,none,
      "standard library error: FloatLiteralType not defined", ())
ERROR(no_CharacterLiteralType_found,sema_tce,none,
      "standard library error: CharacterLiteralType not defined", ())
ERROR(no_StringLiteralType_found,sema_tce,none,
      "standard library error: StringLiteralType not defined", ())

ERROR(ambiguous_expression_unresolved,sema_tce,none,
      "ambiguous expression was not resolved to a concrete type", ())

ERROR(invalid_module_member,sema_tce,none,
      "%0 is not a member of %1 module", (Identifier, Identifier))

ERROR(unary_op_without_attribute,sema_tce,none,
      "use of unary operator without 'unary' attribute specified", ())
ERROR(binary_op_without_attribute,sema_tce,none,
      "use of binary operator without 'infix' attribute specified", ())
ERROR(called_expr_indirect_metatype,sema_tce,none,
      "called expression is an indirect reference to a metatype", ())
ERROR(called_expr_isnt_function,sema_tce,none,
      "called expression isn't a function", ())
ERROR(overloading_ambiguity,sema_tce,none,
      "overloading ambiguity found", ())
ERROR(no_candidates_op, sema_tce, none,
      "no candidates found for %select{binary|unary}0 operator %1",
      (unsigned, Identifier))
ERROR(no_candidates_binop, sema_tce, none,
      "no matching binary operator %0 for types %1 and %2",
      (Identifier, Type, Type))
ERROR(no_candidates_unary, sema_tce, none,
      "no matching unary operator %0 for type %1",
      (Identifier, Type))
ERROR(no_candidates,sema_tce,none, "no candidates found for call", ())
ERROR(no_candidates_ref,sema_tce,none,
      "no candidates found for reference to overloaded %0", (Identifier))
ERROR(use_undeclared_identifier,sema_tce,none,
      "use of undeclared identifier", ())
ERROR(field_number_too_large,sema_tce,none,
      "field number is too large for tuple", ())
ERROR(no_valid_dot_expression,sema_tce,none,
      "base type %0 has no valid '.' expression for this field", (Type))
ERROR(member_ref_metatype_variable,sema_tce,none,
      "reference to member variable %0 requires base object of type %1",
      (Identifier, Type))
ERROR(no_convert_object_arg,sema_tca,none,
      "cannot convert object argument %0 to type %1", (Type, Type))
ERROR(constructor_overload_fail,sema_tce,none,
      "%select{no matching function|ambiguous overloads}0 constructing "
      "type %1", (bool, Type))
ERROR(existential_member_assoc_types,sema_tca,none,
      "cannot refer to member %0 of protocol type %1 because its type (%2) "
      "involves associated types", (Identifier, Type, Type))

ERROR(closure_not_function_type,sema_tce,none,
      "closure inferred to have non-function type %0", (Type))
NOTE(while_converting_closure_body_to_inferred_return_type,sema,none,
     "while converting closure body to inferred return type %0", (Type))

// Operators
ERROR(binop_not_infix,sema_tce,none,
      "binary operator has no infix attribute", ())
ERROR(binop_mismatched_infix,sema_tce,none,
      "binary operator has overloads with incompatible infixity", ())

ERROR(binop_not_overloaded,sema_tce,none,
      "operator is not overloaded as a binary operator", ())
ERROR(unknown_binop,sema_tce,none,
       "operator is not a known binary operator", ())
ERROR(non_assoc_adjacent,sema_tce,none,
      "non-associative operator is adjacent to operator of same precedence", ())
ERROR(incompatible_assoc,sema_tce,none,
      "operator is adjacent to operator of same precedence"
      " but incompatible associativity", ())
ERROR(address_of_rvalue,sema_tce,none,
      "cannot apply '&' to non-lvalue of type %0", (Type))
ERROR(address_of_address,sema_tce,none,
      "cannot apply '&' to a an '&' expression", ())
ERROR(no_subscript_declaration,sema_tce,none,
      "type %0 cannot be subscripted", (Type))
ERROR(subscript_overload_fail,sema_tce,none,
      "%select{no matching function|ambiguous overloads}0 subscripting base %1 "
      "with index of type %2", (bool, Type, Type))
ERROR(existential_subscript_assoc_types,sema_tca,none,
      "cannot subscript value of protocol type %0 because its "
      "%select{index|value}1 type (%2) involves associated types",
      (Type, bool, Type))
NOTE(subscript_decl_here,sema_tca,none,
     "subscript operator declared here", ())
ERROR(condition_convert_limit_reached,sema_tce,none,
      "getLogicValue() for type %0 used in a conditional does not return "
      "a bool", (Type))

ERROR(new_array_bound_zero,sema_tce,none,
      "array type cannot have zero length", ())
ERROR(array_bound_convert_limit_reached,sema_tce,none,
      "getArrayBoundValue() for type %0 used as an array size does not return "
      "an integer type", (Type))

ERROR(new_reference_not_class,sema_tce,none,
      "new expression used with non-class type", ())

ERROR(string_interpolation_overload_fail,sema_tce,none,
      "could not interpolate strings with %0 + %1", (Type, Type))
ERROR(string_interpolation_convert_fail,sema_tce,none,
      "could not coerce expression %0 to string type %1", (Type, Type))
ERROR(nonstring_interpolation_type,sema_tce,none,
      "string interpolation coerced to non-string type %0", (Type))

//------------------------------------------------------------------------------
// Type Check Statements
//------------------------------------------------------------------------------

ERROR(return_invalid_outside_func,sema_tcs,none,
      "return invalid outside of a func", ())
ERROR(return_expr_missing,sema_tcs,none,
      "non-void function should return a value", ())
ERROR(expression_unused_function,sema_tcs,none,
      "expression resolves to an unused function", ())
ERROR(expression_unused_lvalue,sema_tcs,none,
      "expression resolves to an unused l-value", ())
ERROR(assignment_lhs_not_lvalue,sema_tcs,none,
      "cannot assign to the result of this expression", ())
ERROR(assignment_lhs_not_settable,sema_tcs,none,
      "cannot assign to a property or subscript without a 'set' method", ())
ERROR(byref_not_settable,sema_tcs,none,
      "cannot pass by reference a property or subscript without a 'set' method", ())

// ForEach Stmt
ERROR(foreach_missing_enumerable,sema_tcs,none,
      "for-each loop requires the 'Enumerable' protocol to be defined", ())
ERROR(enumerable_protocol_broken,sema_tcs,none,
      "Enumerable protocol definition is broken", ())
ERROR(foreach_missing_range,sema_tcs,none,
      "for-each loop requires the 'Range' protocol to be defined", ())
ERROR(range_protocol_broken,sema_tcs,none,
      "Range protocol definition is broken", ())

ERROR(break_outside_loop,sema_tcs,none,
      "'break' is only allowed inside a loop", ())
ERROR(continue_outside_loop,sema_tcs,none,
      "'continue' is only allowed inside a loop", ())

//------------------------------------------------------------------------------
// Type Check Patterns
//------------------------------------------------------------------------------

ERROR(cannot_infer_type_for_pattern,sema_tcp,none,
      "type annotation missing in pattern", ())
ERROR(pattern_type_mismatch_context,sema_tcp,none,
      "type annotation does not match contextual type %0", (Type))
ERROR(tuple_pattern_in_non_tuple_context,sema_tcp,none,
      "tuple pattern cannot match values of the non-tuple type %0", (Type))
ERROR(tuple_pattern_length_mismatch,sema_tcp,none,
      "tuple pattern has the wrong length for tuple type %0", (Type))
ERROR(coerced_tuple_pattern_has_init,sema_tcp,none,
      "tuple element in pattern cannot have a default initializer", ())

//------------------------------------------------------------------------------
// Type Check Types
//------------------------------------------------------------------------------

ERROR(base_of_array_slice_not_nominal,sema_tct,none,
      "base type of array slice must be a nominal type", (Type))
ERROR(slice_type_not_found,sema_tct,none,
      "cannot find slice implementation type '%0'", (StringRef))
ERROR(tuple_default_local_ref,sema_tct,none,
      "cannot refer to local declaration from default value of"
      " tuple element", ())
ERROR(tuple_global_missing_type,sema_tct,none,
      "a tuple type specifying the type of a global must explicitly state "
      "the type of each tuple element", ())


//==============================================================================
// IR Generation Diagnostics
//==============================================================================

ERROR(no_llvm_target,irgen,none,
      "error loading LLVM target for triple '%0': %1", (StringRef, StringRef))
ERROR(error_opening_output,irgen,none,
      "error opening '%0' for output: %1", (StringRef, StringRef))
ERROR(error_codegen_init_fail,irgen,none,
      "cannot initialize code generation passes for target", ())

ERROR(irgen_unimplemented,irgen,none,
      "unimplemented IR generation feature %0", (StringRef))
ERROR(irgen_failure,irgen,none, "IR generation failure: %0", (StringRef))

#if defined(DIAG)
#  undef DIAG
#endif
#undef NOTE
#undef WARNING
#undef ERROR
